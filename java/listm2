#!/bin/bash

M2_REPO="${HOME}/.m2/repository"

echo "Scanning $M2_REPO ..."
echo ""
echo "Group ID :: Artifact ID :: Version"
echo "----------------------------------"

find "$M2_REPO" -mindepth 3 -type d | while read -r version_dir; do
    if ls "$version_dir"/*.pom >/dev/null 2>&1 || ls "$version_dir"/*.jar >/dev/null 2>&1; then
        version=$(basename "$version_dir")
        artifact=$(basename "$(dirname "$version_dir")")
        group_path=$(dirname "$(dirname "$version_dir")")
        group_id=${group_path#"$M2_REPO"/}
        group_id=${group_id//\//.}
        echo "$group_id::$artifact::$version"
    fi
done | sort
